[{{ item.pool_name | mandatory }}]

listen = /run/php/php{{ php_default_version }}-fpm.sock

user = {{ php_fpm_pool_user }}
group = {{ php_fpm_pool_group }}

listen.owner = {{ php_fpm_pool_user }}
listen.group = {{ php_fpm_pool_group }}
listen.mode = 0660

pm = {{ item.pool_pm | default('dynamic', true) }}
pm.max_children = {{ item.pool_pm_max_children | default(50, true) }}
pm.start_servers = {{ item.pool_pm_start_servers | default(5, true) }}
pm.min_spare_servers = {{ item.pool_pm_min_spare_servers | default(5, true) }}
pm.max_spare_servers = {{ item.pool_pm_max_spare_servers | default(5, true) }}
pm.process_idle_timeout = {{ item.pool_pm_process_idle_timeout | default('10s', true) }};
pm.max_requests = {{ item.pool_pm_max_requests | default(500, true) }}
